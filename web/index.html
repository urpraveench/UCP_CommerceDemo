<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCP Demo Store - Universal Commerce Protocol</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>üõçÔ∏è UCP Demo Store</h1>
            
            <div class="header-controls">
                <div class="shopping-mode-tabs">
                    <button id="tab-traditional" class="mode-tab active" onclick="switchShoppingMode('traditional')">
                        üõí Traditional Shopping
                    </button>
                    <button id="tab-ai-agent" class="mode-tab" onclick="switchShoppingMode('ai-agent')">
                        ü§ñ AI Agent Shopping
                    </button>
                </div>
                <button id="load-profile" class="btn btn-primary btn-sm">Discover Business Profile</button>
                <button id="toggle-api-viewer" class="btn-toggle">Toggle API Viewer</button>
            </div>
        </div>
    </header>

    <div class="split-container">
        <!-- Left Panel: Traditional Shopping UI -->
        <div class="shopping-panel traditional-shopping-panel" id="traditional-shopping-panel">
            <main class="container">
                <!-- Product Discovery Section -->
                <section id="products-section" class="section">
                    <h2>Product Discovery</h2>
                    <div class="search-bar">
                        <input type="text" id="product-search" placeholder="Search products...">
                        <button id="search-btn" class="btn btn-secondary">Search</button>
                        <button id="load-all-products" class="btn btn-secondary">Load All Products</button>
                    </div>
                    <div id="products-grid" class="products-grid"></div>
                </section>

                <!-- Shopping Cart Section -->
                <section id="cart-section" class="section">
                    <h2>Shopping Cart</h2>
                    <div id="cart-items" class="cart-items"></div>
                    <div id="cart-totals" class="cart-totals"></div>
                    <div class="cart-actions">
                        <button id="create-checkout" class="btn btn-primary" disabled>Create Checkout Session</button>
                    </div>
                </section>

                <!-- Checkout Section -->
                <section id="checkout-section" class="section" style="display: none;">
                    <h2>Checkout Session</h2>
                    <div class="checkout-form">
                        <div class="form-group">
                            <label for="buyer-name">Full Name:</label>
                            <input type="text" id="buyer-name" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label for="buyer-email">Email:</label>
                            <input type="email" id="buyer-email" placeholder="john.doe@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="discount-code">Discount Code (optional):</label>
                            <input type="text" id="discount-code" placeholder="10OFF, SAVE20, or FREESHIP">
                        </div>
                        <div class="checkout-actions">
                            <button id="update-checkout" class="btn btn-secondary">Apply Discount</button>
                            <button id="complete-checkout" class="btn btn-success">Complete Checkout</button>
                        </div>
                    </div>
                    <pre id="checkout-output" class="output"></pre>
                </section>
            </main>
        </div>

        <!-- AI Agent Shopping Panel -->
        <div class="shopping-panel ai-agent-shopping-panel" id="ai-agent-shopping-panel" style="display: none;">
            <main class="container">
                <div class="ai-agent-header">
                    <h2>ü§ñ AI Agent Shopping Experience</h2>
                    <p class="ai-agent-subtitle">Shop through conversation! The AI agent uses UCP APIs to help you find products, manage your cart, and complete purchases.</p>
                </div>

                <!-- AI Agent Chat Interface -->
                <section class="section ai-chat-section">
                    <div class="ai-chat-container">
                        <div class="ai-chat-messages" id="ai-chat-messages">
                            <!-- Messages will be added here -->
                        </div>
                        <div class="ai-chat-input-container">
                            <input type="text" id="ai-chat-input" placeholder="Type your message... (e.g., 'Show me laptops' or 'Add laptop to cart')" class="ai-chat-input">
                            <button id="ai-chat-send" class="btn btn-primary">Send</button>
                        </div>
                    </div>
                </section>

                <!-- AI-Managed Cart Display -->
                <section class="section ai-cart-section" id="ai-cart-section" style="display: none;">
                    <h2>Your Cart (Managed by AI Agent)</h2>
                    <div id="ai-cart-items" class="cart-items"></div>
                    <div id="ai-cart-totals" class="cart-totals"></div>
                </section>
            </main>
        </div>

        <!-- Right Panel: API Call Viewer -->
        <div class="api-viewer-panel" id="api-viewer-panel">
            <div class="api-viewer-header">
                <h2>üîå API Call Viewer</h2>
                <div class="api-viewer-controls">
                    <button id="clear-api-calls" class="btn btn-secondary btn-sm">Clear All</button>
                    <span class="api-call-count" id="api-call-count">0 calls</span>
                </div>
            </div>
            <div class="api-calls-list" id="api-calls-list">
                <div class="api-call-placeholder">
                    <p>API calls will appear here as you interact with the shopping UI</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Built with Universal Commerce Protocol (UCP) - Open Source Standard for Agentic Commerce</p>
            <p><a href="https://ucp.dev" target="_blank">Learn more about UCP</a></p>
        </div>
    </footer>

    <!-- Product Detail Modal -->
    <div id="product-detail-modal" class="product-modal" onclick="if(event.target === this) closeProductModal();">
        <div class="product-modal-content" onclick="event.stopPropagation();">
            <button class="product-modal-close" onclick="closeProductModal()" aria-label="Close">&times;</button>
            <div id="product-detail-content"></div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
